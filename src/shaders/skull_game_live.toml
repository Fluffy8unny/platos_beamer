name = "skull_game_live"

vertex="""
     #version 330

      in vec2 position;
      in vec2 uv;
      
      out vec2 uv_coords;
      void main() {
          uv_coords = uv;
          gl_Position = vec4(position, 0.0, 1.0);
      }
     """ 

fragment="""
      #version 330  

      in vec2 uv_coords;
      uniform sampler2D live_tex;
      uniform sampler2D clouds;
      uniform sampler2D clouds2;
      uniform float time;

      out vec4 color;
      
      void main(){ 
         float df  = 0.002*sin(time*10 + uv_coords.y*200);
         float dy = (1.0-smoothstep(0.4,0.6,uv_coords.y))*df;
         float val = texture(live_tex, vec2(uv_coords.x +dy, uv_coords.y)).x;   

         float offset_x = uv_coords.x + time/22.0;
         float offset_y = uv_coords.y +  time/45.0;

         float offset2_x = uv_coords.x - time/20.0;
         float offset2_y = uv_coords.y - time/30.0;

         float cloud_offsetet = texture(clouds2, vec2(offset_x, offset_y)).x;
         float cloud_offsetett = texture(clouds2, vec2(offset_x, offset_y)).y;
         float cloud_offsetett2 = texture(clouds2, vec2(offset2_x, offset2_y)).z;

         float cloud_val = texture(clouds, uv_coords).y;

         float alpha = 1.0-0.5*( uv_coords.y + 1.0);
         float cloud_level = cloud_val*cloud_offsetet*cloud_offsetett*cloud_offsetett2;
         val = val*(cloud_val+0.1)*0.6+cloud_level*0.3;
         color =  vec4(cloud_level*2,val,val,alpha);
      }
      """
